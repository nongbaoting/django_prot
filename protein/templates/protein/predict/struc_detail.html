<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    {% load static %}
    <style>
        .mol-container {
            width: 100%;
            height: 200px;
            position: absolute;
            bottom: 4px;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/3Dmol/1.4.0/3Dmol-min.js"></script>
    <title>test</title>
</head>
<body>
{% load static %}
<a href= "/protein/static/protein/testPDB/{{ str_id }}.pdb.gz">dowload</a>
<h2>{{ gene_name }}</h2>
<div id="container-01" class="mol-container" > </div>


<script>
    $(function () {
        let element = $('#container-01');
        let config = {backgroundColor: 'white'};
        let viewer = $3Dmol.createViewer(element, config);
        let pdbUri = "/protein/static/protein/testPDB/{{ str_id }}.pdb.gz";
       //let pdbUri = "protein/static/protein/testPDB/model_1.pdb";
        /* load */
        jQuery.ajax(pdbUri, {
            success: function (data) {
                let v = viewer;
                v.addModel(data, "pdb");                       /* load data */
                v.setBackgroundColor('white');
                v.setStyle({}, {stick: {color: 'spectrum'}});  /* style all atoms */
                v.zoomTo();                                      /* set camera */
                v.render();                                      /* render scene */
                v.zoom(1.2, 1000);                               /* slight zoom */
            },
            error: function (hdr, status, err) {
                console.error("Failed to load PDB " + pdbUri + ": " + err);
            },
        });



    });
</script>


<style>

</style>
<!--
    molstar.js and .css are obtained from
    - the folder build/viewer after cloning and building the molstar package
    - from the build/viewer folder in the Mol* NPM package
-->
{% load static %}
<link rel="stylesheet" type="text/css" href="/protein/static/protein/molstar.css" />
<script type="text/javascript" src="/protein/static/protein/molstar.js"></script>
<p>aa</p>
<div id="app2" class="mol-container" ></div>

<script type="text/javascript">
    var viewer = new molstar.Viewer('app2', {
        layoutIsExpanded: false,
        layoutShowControls: false,
        layoutShowRemoteState: false,
        layoutShowSequence: true,
        layoutShowLog: false,
        layoutShowLeftPanel: true,

        viewportShowExpand: true,
        viewportShowSelectionMode: false,
        viewportShowAnimation: false,

        pdbProvider: 'rcsb',
        emdbProvider: 'rcsb',
    });
    viewer.loadPdb('7bv2');
    viewer.loadEmdb('EMD-30210', { detail: 6 });
</script>
</body>
</html>